{% extends "app/base_app.html" %}
{% load static %}

{% block content %}
    <link rel="stylesheet" type="text/css" href="{% static 'app/styles.css' %}">

    <div class="container">
        <a href="{% url 'app_produtos' %}" class="back-button"><i class="fa fa-arrow-left"></i> Voltar</a>
        <h1 class="title">Cadastro de Produtos</h1>
        <form action="." method="post" class="form" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
                <label for="id_productname">Produto:</label>
                {{ form2.productname }}
                {% if form2.productname.errors %}
                    <span class="error">{{ form2.productname.errors }}</span>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="id_description">Descrição:</label>
                {{ form2.description }}
                {% if form2.description.errors %}
                    <span class="error">{{ form2.description.errors }}</span>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="id_price">Preço:</label>
                {{ form2.price }}
                {% if form2.price.errors %}
                    <span class="error">{{ form2.price.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="id_discount">Desconto (%):</label>
                {{ form2.discount }}
                {% if form2.discount.errors %}
                    <span class="error">{{ form2.discount.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="id_rating">Pontuação:</label>
                {{ form2.rating }}
                {% if form2.rating.errors %}
                    <span class="error">{{ form2.rating.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="id_preparation_time">Tempo de Preparo (min):</label>
                {{ form2.preparation_time }}
                {% if form2.preparation_time.errors %}
                    <span class="error">{{ form2.preparation_time.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="id_category">Categoria:</label>
                {{ form2.category }}
                {% if form2.category.errors %}
                    <span class="error">{{ form2.category.errors }}</span>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="id_ingredients">Ingredientes/Composição:</label>
                {{ form2.ingredients }}
                {% if form2.ingredients.errors %}
                    <span class="error">{{ form2.ingredients.errors }}</span>
                {% endif %}
            </div>
            
            <div class="form-group">
                <label for="id_image">Imagem:</label>
                {{ form2.image }}
                {% if form2.image.errors %}
                    <span class="error">{{ form2.image.errors }}</span>
                {% endif %}
            </div>
            
            <img id="image-preview" src="#" alt="Imagem" style="display: none; max-width: 200px; max-height: 200px;">
            
            <input type="submit" value="Save" class="button">
        </form>
    </div>

    <script>
        document.getElementById('id_image').addEventListener('change', function() {
            var reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('image-preview').src = e.target.result;
                document.getElementById('image-preview').style.display = 'block';
            };
            reader.readAsDataURL(this.files[0]);
        });
    </script>
{% endblock %}
